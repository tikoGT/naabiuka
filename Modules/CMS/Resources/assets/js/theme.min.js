"use strict";if($(".main-body .page-wrapper").find("#theme-container").length){function a(a){var d=window.location.hash;c($("#main-appearance")),$.ajax({url:ADMIN_SITE_URL+"/theme/list",data:{layout:a},type:"GET",dataType:"JSON",success:function(b){$("#main-appearance").html(b.data),$("#v-pills-social-share-tab").trigger("click"),$("#success-message").css("display","none"),$("#warning-message").css("display","none"),$(".select2-hide-search").select2({minimumResultsForSearch:1/0}),"default"==a?($(d+"-tab").trigger("click"),$(d+"-tab").closest("ul").siblings("a").trigger("click")):($("li a.header").trigger("click"),$("#v-pills-social-share-tab").closest("li").remove(),$("#v-pills-custom-css-js-tab").closest("li").remove(),$("#v-pills-page-config-tab").closest("li").remove(),d.includes("social")||d.includes("page-config")||d.includes("custom-css-js")?$("#v-pills-topNav-tab").trigger("click"):($(d+"-tab").trigger("click"),$(d+"-tab").closest("ul").siblings("a").trigger("click"))),$(function(){$("#sortable").sortable({axis:"y",cursor:"move"})})},complete:function(){$(".conditional").ifs(),$(function(){new b($("#myAppearanceDropdown"))})}})}function b(a){this.dd=a,this.placeholder=this.dd.children("span"),this.opts=this.dd.find("ul.dropdown > li"),this.val="",this.index=-1,this.initEvents()}$(document).ready(function(){$(".conditional").ifs(),$("#success-message").css("display","none"),$("#warning-message").css("display","none"),""==window.location.hash?"layout"==appearance_menu?$("#v-pills-layout-tab").trigger("click"):$("#v-pills-social-share-tab").trigger("click"):($(window.location.hash+"-tab").trigger("click"),$(window.location.hash+"-tab").closest("ul").siblings("a").trigger("click")),$(document).on("change keyup","input",function(){$(".warning-message").addClass("alert-secondary"),$("#warning-message").css("display","block"),$("#warning-msg").html(jsLang("Settings have changed, you should save them!"))})}),$(document).on("click",".folding",function(){let a=this.closest(".ui-state-default");this.classList.contains("closed")?($(a).find(".dd-content").removeClass("card-hide"),$(this).removeClass("closed")):($(a).find(".dd-content").addClass("card-hide"),$(this).addClass("closed"))}),$(document).on("click",".header-text",function(){$(this).closest(".ui-state-default").find(".folding").trigger("click")}),$(document).on("click",".cr",function(){var a=$(this).closest(".switch").find("input").val();1==a?$(this).closest(".switch").find("input").val(0):$(this).closest(".switch").find("input").val(1)});const c=(a,b={})=>{let c=Object.assign({},{message:`<div class="spinner-border appearance-loader text-warning" role="status"><span class="sr-only">Loading...</span></div>`,css:{backgroundColor:"transparent",border:"none"}},b);a.block(c)};$(document).on("click",".tab-name",function(){setTimeout(()=>{$(".nav-link.active").closest("ul").addClass("show").siblings("a").removeClass("collapses").attr("aria-expanded",!0)},100);var a=$(this).attr("data-id");$("#theme-title").html(a),$(".tab-pane").removeClass("show active"),$(`.tab-pane[aria-labelledby="${$(this).attr("id")}"`).addClass("show active"),$(".tab-name").removeClass("active").attr("aria-selected",!1),$(this).addClass("active").attr("aria-selected",!0),$(this).is("#v-pills-layout-tab")?$(".modal-footer.appearance").hide():$(".modal-footer.appearance").show()}),$(document).on("click","#layout-setting",function(){a($(this).attr("data-val"))}),$(document).on("click","#layout-edit",function(){$("#edit-layout").find("input[name=\"name\"], input[name=\"old_layout\"]").val($(this).attr("data-layout"))});var cmsSaveCount=0;$(document).on("click",".theme-option-save-btn",function(a){if(a.preventDefault(),1<++cmsSaveCount)return!1;var b=this;$(this).text(jsLang("Saving")).append(`<div class="spinner-border spinner-border-sm ml-2" role="status">`);var c=0;$("#sortable.footer-main").find("li").each((a,b)=>{$(b).find(".sort-data").val(++c)}),$("textarea.custom").each((a,b)=>{var c=$(b).val().replace(/<style.*>|<script.*>/,"").replace(/"/g,"double_quotation");$(b).closest(".row").append(`
                <input type="hidden" name="${$(b).attr("name")}" value="${c}">
            `)}),$(".custom-file-input").each((a,b)=>{$(b).val($(b).closest(".form-group").find("input[name=\"file_id[]\"").val())}),$.ajax({url:SITE_URL+"/theme/store",type:"POST",data:{_token:token,enctype:"multipart/form-data",data:$("#optionForm").find("input, select").serialize()},success:function(a){var b="alert-danger";1==a.status&&(b="alert-success"),$(".abc").addClass(b),$("#success-message, #warning-message").css("display","block"),$("#warning-msg").html(a.message)},complete:function(){$(b).text(jsLang("Save")).find(".spinner-border").remove(),cmsSaveCount=0}}),setTimeout(()=>{$("#success-message, #warning-message").slideUp(500),$(".abc").removeClass("alert-success alert-danger")},5e3)}),$(document).on("click",".add-new-widget-title",function(){var a=$(this).attr("data-widget");$(this).closest(".row").before(`
            <div class="form-group row">
                <div class="col-sm-5">
                    <div class="input-group bg-transparent">
                        <input type="text" class="form-control" name="${layout}_template_footer[main][${a}][data][${$(this).attr("data-id")}][label]" value="" maxlength="40">
                    </div>
                </div>
                <div class="col-sm-6">
                    <div class="input-group bg-transparent">
                        <input type="text" class="form-control" name="${layout}_template_footer[main][${a}][data][${$(this).attr("data-id")}][link]" value="">
                    </div>
                </div>
                <div class="col-sm-1 ps-0">
                    <div class="input-group bg-transparent cursor_pointer remove-widget-title">
                        <span class="input-group-text rounded"><i class="feather icon-trash-2 fa-2x"></i></span>
                    </div>
                </div>
            </div>
        `),$(this).attr("data-id",+$(this).attr("data-id")+1)}),$(document).on("click",".remove-widget-title",function(){$(this).closest(".row").remove()}),$(function(){$("#sortable").sortable({axis:"y",cursor:"move"})}),$(document).on("keyup",".widget-title",function(){$(this).closest("li").find(".header-title").text($(this).val())}),$(document).on("click",".img-delete-icon",function(){var a=$(this).attr("data-objectId");$("#optionForm").prepend(`
            <input type="hidden" name="delete_file_ids[]" value="${a}" />
        `),$(this).closest("div.old-image").remove()}),$(function(){new b($("#myAppearanceDropdown"));$(document).on("click",function(){$(".appearance-dropdown").removeClass("active")})}),b.prototype={initEvents:function(){var b=this;b.dd.on("click",function(){return $(this).toggleClass("active"),!1}),b.opts.on("click",function(){a($(this).attr("data-val"));var c=$(this);b.val=c.text(),b.index=c.index(),b.placeholder.text(b.val)})}},$(document).on("click","ul.nav.nav-list > li",function(a){return!!a.target.href&&void window.location.replace(a.target.href)});var debounce=null;$(document).on("change",".layout-primary-color",function(){var a=$(this).attr("name"),b=$(this).val();clearTimeout(debounce),debounce=setTimeout(function(){$.ajax({url:SITE_URL+"/theme/store/primary-color",type:"POST",data:{_token:token,name:a,value:b},success:function(a){var b="alert-danger";1==a.status&&(b="alert-success"),$(".abc").addClass(b),$("#success-message, #warning-message").css("display","block"),$("#warning-msg").html(a.message)},complete:function(){setTimeout(()=>{$("#success-message, #warning-message").slideUp(500),$(".abc").removeClass("alert-success alert-danger")},5e3)}})},1e3)})}$(document).on("click","#v-pills-topNav-tab",function(){$(".tab-pane").removeClass("show active"),$("#"+$(this).attr("id")).addClass("active").attr("aria-selected",!0),$(`.tab-pane[aria-labelledby="${$(this).attr("id")}"`).addClass("show active")}),$(document).on("click",".nav-list .nav-link",function(){var a=$(".tab-pane");$([document.documentElement,document.body]).animate({scrollTop:$(a).offset().top-350},350)}),setTimeout(()=>{$(".nav-link.active").closest("ul").addClass("show").siblings("a").removeClass("collapses").attr("aria-expanded",!0)},100);
