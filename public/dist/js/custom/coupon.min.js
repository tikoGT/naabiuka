'use strict';$(document).ready(function(){$("#success-message").css("display","none"),$("#warning-message").css("display","none"),$("#v-pills-general-tab").trigger("click"),$("input").on("change",function(){$(".warning-message").addClass("alert-secondary"),$("#warning-message").css("display","block"),$("#warning-msg").html(jsLang("Settings have changed, you should save them!"))})}),$(document).on("click",".cr",function(){var a=$(this).closest(".switch").find("input").val();1==a?$(this).closest(".switch").find("input").val(0):$(this).closest(".switch").find("input").val(1)}),$(".tab-name").on("click",function(){var a=$(this).attr("data-id");$("#theme-title").html(a)}),$("#discount_amount").on("keyup change",function(){$(this).attr("placeholder")==jsLang("Discount Percentage")&&100<$(this).val()&&$(this).val(100)}),$(".main-body .page-wrapper").find("#coupon-add-container, #coupon-edit-container, #vendor-coupon-add-container, #vendor-coupon-edit-container, #coupon-list-container, #vendor-coupon-list-container").length&&($(".tab-pane[aria-labelledby=\"v-pills-general-tab\"").addClass("show active"),$("#discount_type").on("change",function(){"Percentage"==$(this).val()?($(".discount_amount_label").text(jsLang("Discount Percentage")),$("#discount_amount").attr("placeholder",jsLang("Discount Percentage")),100<=$("#discount_amount").val()?$("#discount_amount").val(100):""):($(".discount_amount_label").text(jsLang("Discount Amount")),$("#discount_amount").attr("placeholder",jsLang("Discount Amount")))}));function discount(){"Percentage"==$("select[name=\"discount_type\"]").val()?$(".discount_amount_label").text(jsLang("Discount Percentage")):$("#max_discount").hide(),$("select[name=\"discount_type\"]").on("change",function(a){"Percentage"==a.target.value?$("#max_discount").show():$("#max_discount").hide()})}function searchVendor(){$(".select-vendor").select2({ajax:{url:SITE_URL+"/find-vendors-with-ajax",dataType:"json",delay:250,data:function(a){return{q:a.term,page:a.page}},processResults:function(a){let b=a.data;return{results:b}},cache:!0},placeholder:jsLang("Search for vendor by name."),minimumInputLength:3,allowClear:!0})}$(".select_affiliate_user").select2({ajax:{url:SITE_URL+"/affiliate/find-affiliate-user-in-ajax",dataType:"json",delay:250,data:function(a){return{q:a.term,page:a.page}},processResults:function(a){let b=a.data;return{results:b}},cache:!0},placeholder:jsLang("Search for an affiliate users."),minimumInputLength:3,allowClear:!0});function searchProducts(){$(".select-products").select2({ajax:{url:SITE_URL+"/find-products-in-ajax",dataType:"json",delay:250,data:function(a){return{q:a.term,page:a.page,vendor_id:$("#vendor_id").val()}},processResults:function(a){let b=a.data;return{results:b}},cache:!0},placeholder:jsLang("Search for products by name."),minimumInputLength:3})}function oldProduct(){return!!(Array.isArray(old_item)&&old_item.length)&&void $.ajax({url:oldProductUrl,type:"GET",dataType:"json",data:{product_ids:old_item},success:function(a){var b="";const c=a.data;for(const d in c)b+=`<option selected value="${c[d].id}">${c[d].text}</option>`;$(".select-products").html(b)}})}function oldVendor(){return""!=old_vendor&&void $.ajax({url:SITE_URL+"/coupon/old-vendor",type:"GET",dataType:"json",data:{vendor_id:old_vendor},success:function(a){$(".select-vendor").html(`<option selected value="${a.id}">${a.text}</option>`)}})}$("#vendor_id").on("change",function(){$("#product_id").empty()}),$(".main-body .page-wrapper").find("#coupon-add-container").length&&($("input[name=\"start_date\"]").daterangepicker(dateSingleConfig()),$("input[name=\"end_date\"]").daterangepicker(dateSingleConfig())),$(".main-body .page-wrapper").find("#coupon-edit-container").length&&($("input[name=\"start_date\"]").daterangepicker(dateSingleConfig($("input[name=\"start_date\"]").val())),$("input[name=\"end_date\"]").daterangepicker(dateSingleConfig($("input[name=\"end_date\"]").val()))),$(".main-body .page-wrapper").find("#coupon-add-container, #coupon-edit-container").length&&(discount(),searchVendor(),searchProducts(),oldProduct(),oldVendor()),$(".main-body .page-wrapper").find("#vendor-coupon-add-container, #vendor-coupon-edit-container").length&&(discount(),oldProduct(),searchProducts()),$(".main-body .page-wrapper").find("#vendor-coupon-add-container").length&&($("input[name=\"start_date\"]").daterangepicker(dateSingleConfig()),$("input[name=\"end_date\"]").daterangepicker(dateSingleConfig())),$(".main-body .page-wrapper").find("#vendor-coupon-edit-container").length&&($("input[name=\"start_date\"]").daterangepicker(dateSingleConfig($("input[name=\"start_date\"]").val())),$("input[name=\"end_date\"]").daterangepicker(dateSingleConfig($("input[name=\"end_date\"]").val()))),$(".main-body .page-wrapper").find("#coupon-list-container").length&&$(document).on("click","#csv, #pdf",function(a){a.preventDefault(),window.location=SITE_URL+"/coupon/"+this.id}),$(".main-body .page-wrapper").find("#coupon-redeem-list-container").length&&$(document).on("click","#csv, #pdf",function(a){a.preventDefault(),window.location=SITE_URL+"/coupon-redeem/"+this.id}),$(".main-body .page-wrapper").find("#vendor-coupon-list-container").length&&$(document).on("click","#csv, #pdf",function(a){a.preventDefault(),window.location=SITE_URL+"/coupon/"+this.id}),$(".coupon-submit-button").on("click",function(){var a=["#v-pills-general","#v-pills-restriction","#v-pills-limit"];setTimeout(()=>{for(const c in a)if($(a[c]).find(".error").length){var b=$(a[c]).attr("aria-labelledby");$("#"+b).tab("show"),tabTitle(b);break}},100)});function tabTitle(a){var b=$("#"+a).attr("data-id");$("#theme-title").html(b)}$("button.switch-tab").on("click",function(){$("#"+$(this).attr("data-id")).tab("show");var a=$(this).attr("data-id");tabTitle(a),$(".tab-pane[aria-labelledby=\"home-tab\"").addClass("show active"),$("#"+$(this).attr("id")).addClass("active").attr("aria-selected",!0)});
