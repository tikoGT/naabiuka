"use strict";$("#dataTableBuilder_length").addClass("p-0"),$("#dataTableBuilder").removeAttr("style"),$(document).on("click",".filterbtn",(function(){$(this).toggleClass("btn-primary active")})),$(document).on("change",".filter",(function(){var e="?";$(".group-filter").each((function(){$(this).hasClass("active")&&"All"!==$(this).data("filter-value")&&(e+=$(this).data("filter-key")+"="+$(this).data("filter-value")+"&"),e+=$(this).attr("name")+"="+$(this).val()+"&"})),$(".filter").each((function(){e+=$(this).attr("name")+"="+$(this).val()+"&"})),$("#dataTableBuilder").DataTable().ajax.url(e).load()})),$(document).on("click",".group-filter",(function(){if($(this).hasClass("active"))return!1;$(this).toggleClass("active").siblings().removeClass("active");var e="?";"All"!==$(this).data("filter-value")&&(e+=$(this).data("filter-key")+"="+$(this).data("filter-value")+"&"),$("#dataTableBuilder").DataTable().ajax.url(e).load(),console.log(e,$(this).data("filter-value"),"All"!==$(this).data("filter-value"))})),$("#dataTableSearch").on("input keypress",(function(e){$("#dataTableBuilder").DataTable().search($(this).val()).draw()}));const characters="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function generateString(e){let t="";const a=characters.length;for(let n=0;n<e;n++)t+=characters.charAt(Math.floor(Math.random()*a));return t}function headerCheckBox(){$(".need-batch-operation").find("table thead tr").prepend('\n <th class="batch-header" width="2%">\n <input type="checkbox" id="header_checkbox" class="header-checkbox">\n </th>\n ')}function bodyCheckBox(){let e="",t=0;$(".need-batch-operation").find("table tbody tr").each(((a,n)=>{e=generateString(10),t=$(n).find(".confirm-delete").attr("data-id"),$(n).prepend(`\n <td class="batch-body align-middle" width="2%">\n <div class="checkbox checkbox-warning d-block me-0 p-0">\n <input class="body-checkbox" type="checkbox" id="${e}" value="${t}">\n <label class="cr" for="${e}"></label>\n </div>\n </td>\n `)}))}function tableContent(){if($(".need-batch-operation").find("table tbody tr td").length<=1)return $(".batch-header").remove(),!1;0==$(".need-batch-operation").find("table thead tr .batch-header").length?headerCheckBox():needCheckHeader(!1),0==$(".need-batch-operation").find("table tbody tr .batch-body").length?bodyCheckBox():needCheckBody(!1)}function needCheckBody(e=!0){$(".need-batch-operation").find("table tbody tr .batch-body input").prop("checked",e)}function needCheckHeader(e=!0){$(".batch-header input").prop("checked",e)}function checkCount(){return $(".batch-body input:checked").length}function hideBatchDeleteButton(){$(".batch-delete-count").closest("a").addClass("d-none")}function showBatchDeleteButton(){$(".batch-delete-count").closest("a").removeClass("d-none")}function batchOperation(){$(".batch-delete-count").text(checkCount()),checkCount()?showBatchDeleteButton():hideBatchDeleteButton()}function updateDataTableTranslations(){$("#dataTableBuilder_previous").html(jsLang("Previous")),$("#dataTableBuilder_next").html(jsLang("Next")),$(".dataTables_empty").eq(0).html(jsLang("No data available in table")),$("#btnGroupDrop1").html(jsLang("Export"));let e=$("#dataTableBuilder_info").html();if(e){let t=e.match(/[\d\.]+/g);e=`${jsLang("Showing")} ${t[0]} ${jsLang("to")} ${t[1]} ${jsLang("of")} ${t[2]} ${jsLang("entries")}`,$("#dataTableBuilder_info").html(e)}}$(document).ajaxComplete((function(e,t,a){""!=a.url.split("?")[0]&&window.location.href.split("?")[0]!=a.url.split("?")[0]||(tableContent(),hideBatchDeleteButton())})),$(document).on("change",".batch-header input",(function(){needCheckBody(this.checked),batchOperation()})),$(document).on("change",".batch-body input",(function(){needCheckHeader($(".batch-body").length==checkCount()),batchOperation()})),$(document).on("click",".batch-delete-operation",(function(){var e=[];$(this).text(jsLang("Deleting")).append('<div class="spinner-border spinner-border-sm ml-2"></div>').addClass("disabled-btn"),$(".batch-body input:checked").each(((t,a)=>{"undefined"!=$(a).val()&&e.push($(a).val())})),$.ajax({url:ADMIN_SITE_URL+"/batch/delete",type:"POST",dataType:"json",data:{_token:token,records:e,namespace:$(".need-batch-operation").attr("data-namespace"),column:$(".need-batch-operation").attr("data-column")},success:function(e){"success"==e.status?($("#dataTableBuilder").DataTable().ajax.reload(null,!1),$(".top-notification").removeClass("d-none").find(".alert").addClass("alert-success").removeClass("alert-danger").find(".alertText").text(e.message)):$(".top-notification").removeClass("d-none").find(".alert").addClass("alert-danger").removeClass("alert-success").find(".alertText").text(e.message),$(".top-notification").siblings(".noti-alert").remove()},error:function(e,t,a){$(".failed-notification").removeClass("d-none").find(".alertText").text(a)},complete:function(){$(".batch-delete-operation").text(jsLang("Yes, Confirm")).removeClass("disabled-btn").find(".spinner-border").remove(),bootstrap.Modal.getOrCreateInstance(document.getElementById("batchDelete")).hide()}})})),$((()=>{$("#dataTableBuilder").on("draw.dt",(()=>updateDataTableTranslations()))}));