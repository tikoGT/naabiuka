"use strict"; function readURL(a) { if (a.files && a.files[0]) { var b = new FileReader; b.readAsDataURL(a.files[0]) } } $(".main-body .page-wrapper").find("#company-settings-container").length && ($(".js-example-basic-single").select2(), $("#dflt_lang").on("change", function () { var a = $("#dflt_lang option:selected").attr("data-rel"); $.ajax({ url: SITE_URL + "/languages/translation/" + a, type: "get", data: { _token: token, type: "company_setting" } }) }), $("#company_name").on("blur", function () { if ("" == $(this).val()) $("#site_short_name").val(""); else { var a = $(this).val().split(" "); 1 == a.length ? $("#site_short_name").val(a[0][0].toUpperCase() + a[0][1].toUpperCase()) : 2 == a.length ? $("#site_short_name").val(a[0][0].toUpperCase() + a[1][0].toUpperCase()) : $("#site_short_name").val(a[0][0].toUpperCase() + a[1][0].toUpperCase() + a[2][0].toUpperCase()) } })), $(".main-body .page-wrapper").find("#sms-settings-container").length && $(".select").select2(), $(".main-body .page-wrapper").find("#language-settings-container").length && ($(document).on("init.dt", function () { $(".dataTables_length").remove(), $("#dataTableBuilder").removeAttr("style") }), dataTable("#dataTableBuilder", [2, 3, 4]), $(document).on("click", ".edit_language", function () { var a = $(this).attr("id"); $.ajax({ url: SITE_URL + "/languages/edit", data: { id: a, _token: token }, type: "POST", dataType: "JSON", success: function (a) { $("#edit_language_name").val(a.language_name), $("#edit_short_name").val(a.short_name), $("#edit_status").val(a.status).trigger("change"), $("#edit_direction").val(a.direction).trigger("change"), $("#language_id").val(a.id), $("#editImg").attr("src", a.flag), 1 == a.is_default ? $("#edit_default").prop("checked", !0) : $("#edit_default").prop("checked", !1), $("#edit_language").modal() } }) }), $("#edit_default").on("change", function () { $(this)[0].checked && $("#edit_status").val("Active").trigger("change") }), $("#default").on("change", function () { $(this)[0].checked && $("#status").val("Active").trigger("change") }), $("#add-language").on("show.bs.modal", function () { $(this).find(".error").hide() }), $("#add-language").on("hidden.bs.modal", function () { $(this).find("select").val("").trigger("change"), $("#default").prop("checked", !1) }), $("#blah_add").hide(), $("#confirmDelete").on("show.bs.modal", function (a) { var b = $(a.relatedTarget), c = $(this); $("#confirmDeleteSubmitBtn").attr("data-task", "").removeClass("delete-task-btn"), "Delete" == b.data("label") && (c.find("#confirmDeleteSubmitBtn").addClass("delete-task-btn").attr("data-task", b.data("id")).text(jsLang("Yes, Confirm")).show(), c.find("#confirmDeleteLabel").text(b.data("title")), c.find(".modal-body").text(b.data("message"))), $("#confirmDeleteSubmitBtn").on("click", function () { $("#delete-language-" + $(this).data("task")).trigger("submit") }) }), $(document).on("click", "#tablereload", function (a) { a.preventDefault(), $("#dataTableBuilder").DataTable().ajax.reload() }), $(".js-example-basic-single-1").select2({ dropdownParent: $("#edit_language") }), $(".js-example-basic-single-2").select2({ dropdownParent: $("#add-language") })), $(".main-body .page-wrapper").find("#translation-settings-container").length && dataTable("#dataTableBuilder", 1), $(".main-body .page-wrapper").find("#currency-converter-settings-container").length && $("input:radio[name=customRadio]").click(function () { "customRadio2" == $(this).attr("id") ? ($("#exchange_rate_api").val("Active"), $("#currency_converter_api").val("Inactive")) : "customRadio1" == $(this).attr("id") && ($("#exchange_rate_api").val("Inactive"), $("#currency_converter_api").val("Active")) }), $(".main-body .page-wrapper").find("#sso-settings-container").length && $(".removeSpace").keyup(function () { let a = $(this).val(); a = a.replace(/\s/g, ""), $(this).val(a) }), $(document).on("click", ".custom-file", function () { $(this).closest("#iconTop").length && $(".btn-file-add").attr("dataFavicon", "icon") }), $(document).on("click", ".custom-file", function () { $(this).closest("#logo").length && $(".btn-file-add").attr("dataFavicon", "logo") }), $(document).on("click", "#btnSubmits", function () { setTimeout(goToErrorMessage, 0) }); function goToErrorMessage() { $([document.documentElement, document.body]).animate({ scrollTop: $(".error").offset().top - 50 }, 500) } $(".main-body .page-wrapper").find("#translation-settings-container").length && $(document).on("blur", "input", function () { let a = $(this).val(), b = $(this).data("name"); 0 < $("#language_from").find(`input[name="${b}"]`).length ? $("#language_from").find(`input[name="${b}"]`).val(a) : $("#language_from").append(`<input type="hidden" name="${b}" value="${a}">`) }), $(document).on("file-attached", ".custom-file", function (a, b) { let c = b.data; c && $(this).closest(".preview-parent").find(".custom-file-input").val(c[0].id) }), $("#customer_signup, #vendor_signup").on("change", function () { "0" == $(this).val() ? $(this).attr("value", "1") : $(this).attr("value", "0") }); function searchCurrency() { $(".select-currency").select2({ ajax: { url: SITE_URL + "/find-currency-in-ajax", dataType: "json", delay: 250, data: function (a) { return { q: a.term, page: a.page } }, processResults: function (a) { let b = a.data; return { results: b } }, cache: !0 }, placeholder: jsLang("Search for currency"), minimumInputLength: 1 }) } if ($(".main-body .page-wrapper").find("#company-settings-container").length) { function a(a) { a ? ($("#company_state").html(""), "null" == oldCity && $("#company_city").html(d), $.ajax({ url: url + "/geo-locale/countries/" + a + "/states", type: "GET", dataType: "json", beforeSend: function () { $("#company_state").attr("disabled", "true"), $("#company_state").html(c) }, success: function (a) { $("#company_state").html(e), $.each(a.data, function (a, b) { $("#company_state").append(`'<option ${b.code == oldState ? "Selected" : ""} data-state="${b.code}" value="${b.code}">${b.name}</option>'`) }), $("#company_state").removeAttr("disabled"), 0 >= a.length && 0 >= a.data.length && (f = f.replace(":x", "State"), $("#company_state").html(`<option value="">${f}</option>`)) } })) : ($("#company_state").html(e), $("#company_city").html(d)) } function b(a, b) { a && b ? ($("#company_city").html(""), $.ajax({ url: url + "/geo-locale/countries/" + b + "/states/" + a + "/cities", type: "GET", dataType: "json", beforeSend: function () { $("#company_city").html(c), $("#company_city").attr("disabled", "true") }, success: function (a) { $("#company_city").html(d), $.each(a.data, function (a, b) { $("#company_city").append(`<option ${b.name == oldCity ? "Selected" : ""} value="${b.name}">${b.name}</option>`) }), $("#company_city").removeAttr("disabled"), 0 >= a.length && 0 >= a.data.length && (f = f.replace(":x", "City"), $("#company_city").html(`<option value="">${f}</option>`)) } })) : $("#company_city").html(d) } searchCurrency(), $(".select-currency").html(`<option selected value="${currencyId}">${currencyName}</option>`); let c = `<option value="">${jsLang("Loading")}...</option>`, d = `<option value="">${jsLang("Select City")}</option>`, e = `<option value="">${jsLang("Select State")}</option>`, f = jsLang(":x is not available."); $(".addressSelect").select2(), $.ajax({ url: url + "/geo-locale/countries", type: "GET", dataType: "json", beforeSend: function () { $("#company_country").html(c), $("#company_country").attr("disabled", "true") }, success: function (a) { $("#company_country").html("<option value=\"\">" + jsLang("Select Country") + "</option>"), $.each(a, function (a, b) { $("#company_country").append(`'<option  ${b.code == oldCountry ? "Selected" : ""} data-country="${b.code}" value="${b.code}">${b.name}</option>'`) }), $("#company_country").removeAttr("disabled") } }), "null" != oldState && a(oldCountry), "null" != oldCity && b(oldState, oldCountry), $("#company_country").on("change", function () { oldCity = "null", a($("#company_country").find(":selected").attr("data-country")) }), $("#company_state").on("change", function () { b($("#company_state").find(":selected").attr("data-state"), $("#company_country").find(":selected").attr("data-country")) }) }